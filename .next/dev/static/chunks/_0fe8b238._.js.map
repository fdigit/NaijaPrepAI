{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Documents/fDigit%20Technologies/NaijaPrepAI/components/dashboard/DashboardLayout.tsx"],"sourcesContent":["'use client';\n\nimport { useSession, signOut } from 'next-auth/react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { GraduationCap, Home, BookOpen, BarChart3, Settings, LogOut, Menu, X, Sparkles, Calendar, FileText, Trophy } from 'lucide-react';\nimport { useState } from 'react';\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\n  const { data: session } = useSession();\n  const pathname = usePathname();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  const navigation = [\n    { name: 'Home', href: '/dashboard', icon: Home },\n    { name: 'Generate Lesson', href: '/dashboard/generate', icon: Sparkles },\n    { name: 'My Lessons', href: '/dashboard/lessons', icon: BookOpen },\n    { name: 'Exam Prep', href: '/dashboard/exam-prep', icon: FileText },\n    { name: 'Study Planner', href: '/dashboard/study-planner', icon: Calendar },\n    { name: 'Gamification', href: '/dashboard/gamification', icon: Trophy },\n    { name: 'Analytics', href: '/dashboard/analytics', icon: BarChart3 },\n    { name: 'Settings', href: '/dashboard/settings', icon: Settings },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-[#F7F8FA] flex\">\n      {/* Sidebar - Desktop */}\n      <aside className=\"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 lg:z-50\">\n        <div className=\"flex flex-col flex-grow bg-white border-r border-slate-200 pt-5 pb-4 overflow-y-auto\">\n          {/* Logo */}\n          <div className=\"flex items-center flex-shrink-0 px-6 mb-8\">\n            <div className=\"bg-[#00695C] p-2 rounded-lg text-white\">\n              <GraduationCap size={24} />\n            </div>\n            <div className=\"ml-3\">\n              <h1 className=\"text-xl font-bold text-slate-900 tracking-tight\">\n                NaijaPrep<span className=\"text-[#00695C]\">AI</span>\n              </h1>\n              <p className=\"text-xs text-slate-500\">SSCE & BECE Companion</p>\n            </div>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"flex-1 px-3 space-y-1\">\n            {navigation.map((item) => {\n              const Icon = item.icon;\n              const isActive = pathname === item.href || (item.href !== '/dashboard' && pathname?.startsWith(item.href));\n              return (\n                <Link\n                  key={item.name}\n                  href={item.href}\n                  className={`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${\n                    isActive\n                      ? 'bg-[#00695C] text-white'\n                      : 'text-slate-700 hover:bg-slate-100 hover:text-[#00695C]'\n                  }`}\n                >\n                  <Icon size={20} />\n                  {item.name}\n                </Link>\n              );\n            })}\n          </nav>\n\n          {/* User Section */}\n          <div className=\"flex-shrink-0 border-t border-slate-200 p-4\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              {session?.user?.image && (\n                <img\n                  src={session.user.image}\n                  alt={session.user.name || 'User'}\n                  className=\"w-10 h-10 rounded-full\"\n                />\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-slate-900 truncate\">\n                  {session?.user?.name || 'Student'}\n                </p>\n                <p className=\"text-xs text-slate-500 truncate\">\n                  {session?.user?.email}\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={() => signOut({ callbackUrl: '/' })}\n              className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors\"\n            >\n              <LogOut size={18} />\n              Sign Out\n            </button>\n          </div>\n        </div>\n      </aside>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col lg:pl-64\">\n        {/* Mobile Header */}\n        <header className=\"lg:hidden bg-white border-b border-slate-200 sticky top-0 z-50\">\n          <div className=\"px-4 sm:px-6\">\n            <div className=\"flex items-center justify-between h-16\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"bg-[#00695C] p-2 rounded-lg text-white\">\n                  <GraduationCap size={20} />\n                </div>\n                <div>\n                  <h1 className=\"text-lg font-bold text-slate-900\">\n                    NaijaPrep<span className=\"text-[#00695C]\">AI</span>\n                  </h1>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {session && (\n                  <button\n                    onClick={() => signOut({ callbackUrl: '/' })}\n                    className=\"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors\"\n                    title=\"Sign Out\"\n                  >\n                    <LogOut size={20} />\n                  </button>\n                )}\n                <button\n                  onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n                  className=\"p-2 text-slate-600\"\n                >\n                  {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          {mobileMenuOpen && (\n            <div className=\"border-t border-slate-200 bg-white\">\n              <nav className=\"px-4 py-4 space-y-2\">\n                {navigation.map((item) => {\n                  const Icon = item.icon;\n                  const isActive = pathname === item.href || (item.href !== '/dashboard' && pathname?.startsWith(item.href));\n                  return (\n                    <Link\n                      key={item.name}\n                      href={item.href}\n                      onClick={() => setMobileMenuOpen(false)}\n                      className={`flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${\n                        isActive\n                          ? 'bg-[#00695C] text-white'\n                          : 'text-slate-600 hover:bg-slate-50'\n                      }`}\n                    >\n                      <Icon size={20} />\n                      {item.name}\n                    </Link>\n                  );\n                })}\n                <div className=\"pt-4 border-t border-slate-200\">\n                  <div className=\"flex items-center gap-3 px-4 mb-3\">\n                    {session?.user?.image && (\n                      <img\n                        src={session.user.image}\n                        alt={session.user.name || 'User'}\n                        className=\"w-8 h-8 rounded-full\"\n                      />\n                    )}\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-slate-900 truncate\">\n                        {session?.user?.name || 'Student'}\n                      </p>\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => {\n                      signOut();\n                      setMobileMenuOpen(false);\n                    }}\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-slate-600 hover:bg-slate-50\"\n                  >\n                    <LogOut size={20} />\n                    Sign Out\n                  </button>\n                </div>\n              </nav>\n            </div>\n          )}\n        </header>\n\n        {/* Main Content */}\n        <main className=\"flex-1\">{children}</main>\n\n        {/* Footer */}\n        <footer className=\"bg-white border-t border-slate-200 py-8 mt-12\">\n          <div className=\"max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm\">\n            <p>Â© {new Date().getFullYear()} NaijaPrep AI. Content aligned with NERDC Curriculum.</p>\n          </div>\n        </footer>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Documents/fDigit%20Technologies/NaijaPrepAI/utils/exportUtils.ts"],"sourcesContent":["import { Document, Packer, Paragraph, TextRun, HeadingLevel, AlignmentType, Table, TableRow, TableCell, WidthType } from 'docx';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport { LessonContent } from '@/types';\r\n\r\n/**\r\n * Convert markdown to plain text (simple implementation)\r\n */\r\nfunction markdownToText(markdown: string): string {\r\n  return markdown\r\n    .replace(/^#+\\s+/gm, '') // Remove headers\r\n    .replace(/\\*\\*(.*?)\\*\\*/g, '$1') // Remove bold\r\n    .replace(/\\*(.*?)\\*/g, '$1') // Remove italic\r\n    .replace(/\\[([^\\]]+)\\]\\([^\\)]+\\)/g, '$1') // Remove links, keep text\r\n    .replace(/`([^`]+)`/g, '$1') // Remove code blocks\r\n    .replace(/\\n{3,}/g, '\\n\\n') // Normalize multiple newlines\r\n    .trim();\r\n}\r\n\r\n/**\r\n * Export lesson as Word document\r\n */\r\nexport async function exportToWord(\r\n  lesson: LessonContent,\r\n  metadata?: {\r\n    classLevel?: string;\r\n    subject?: string;\r\n    term?: string;\r\n    week?: number;\r\n    topic?: string;\r\n  }\r\n): Promise<void> {\r\n  const children: (Paragraph | Table)[] = [];\r\n\r\n  // Title\r\n  children.push(\r\n    new Paragraph({\r\n      text: lesson.topicTitle,\r\n      heading: HeadingLevel.TITLE,\r\n      alignment: AlignmentType.CENTER,\r\n      spacing: { after: 400 },\r\n    })\r\n  );\r\n\r\n  // Metadata (if provided)\r\n  if (metadata) {\r\n    const metadataText = [\r\n      metadata.classLevel && `Class: ${metadata.classLevel}`,\r\n      metadata.subject && `Subject: ${metadata.subject}`,\r\n      metadata.term && `Term: ${metadata.term}`,\r\n      metadata.week && `Week: ${metadata.week}`,\r\n      metadata.topic && `Topic: ${metadata.topic}`,\r\n    ]\r\n      .filter(Boolean)\r\n      .join(' | ');\r\n\r\n    if (metadataText) {\r\n      children.push(\r\n        new Paragraph({\r\n          text: metadataText,\r\n          alignment: AlignmentType.CENTER,\r\n          spacing: { after: 300 },\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  // Introduction\r\n  children.push(\r\n    new Paragraph({\r\n      text: 'Introduction',\r\n      heading: HeadingLevel.HEADING_1,\r\n      spacing: { before: 400, after: 200 },\r\n    })\r\n  );\r\n  children.push(\r\n    new Paragraph({\r\n      text: lesson.introduction,\r\n      spacing: { after: 300 },\r\n    })\r\n  );\r\n\r\n  // Main Content\r\n  children.push(\r\n    new Paragraph({\r\n      text: 'Lesson Content',\r\n      heading: HeadingLevel.HEADING_1,\r\n      spacing: { before: 400, after: 200 },\r\n    })\r\n  );\r\n\r\n  // Split main content by paragraphs and convert markdown to text\r\n  const mainContentText = markdownToText(lesson.mainContent);\r\n  const paragraphs = mainContentText.split('\\n\\n').filter(p => p.trim());\r\n  paragraphs.forEach(para => {\r\n    children.push(\r\n      new Paragraph({\r\n        text: para.trim(),\r\n        spacing: { after: 200 },\r\n      })\r\n    );\r\n  });\r\n\r\n  // Summary Points\r\n  if (lesson.summaryPoints.length > 0) {\r\n    children.push(\r\n      new Paragraph({\r\n        text: 'Key Summary Points',\r\n        heading: HeadingLevel.HEADING_1,\r\n        spacing: { before: 400, after: 200 },\r\n      })\r\n    );\r\n\r\n    lesson.summaryPoints.forEach((point, idx) => {\r\n      children.push(\r\n        new Paragraph({\r\n          children: [\r\n            new TextRun({\r\n              text: `${idx + 1}. `,\r\n              bold: true,\r\n            }),\r\n            new TextRun({\r\n              text: point,\r\n            }),\r\n          ],\r\n          spacing: { after: 150 },\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  // Practice Questions\r\n  if (lesson.practiceQuestions.length > 0) {\r\n    children.push(\r\n      new Paragraph({\r\n        text: 'Practice Questions',\r\n        heading: HeadingLevel.HEADING_1,\r\n        spacing: { before: 400, after: 200 },\r\n      })\r\n    );\r\n\r\n    lesson.practiceQuestions.forEach((q, qIdx) => {\r\n      // Question\r\n      children.push(\r\n        new Paragraph({\r\n          children: [\r\n            new TextRun({\r\n              text: `Question ${qIdx + 1}: `,\r\n              bold: true,\r\n            }),\r\n            new TextRun({\r\n              text: q.question,\r\n            }),\r\n          ],\r\n          spacing: { after: 150 },\r\n        })\r\n      );\r\n\r\n      // Options\r\n      q.options.forEach((opt, optIdx) => {\r\n        const optionLabel = String.fromCharCode(65 + optIdx); // A, B, C, D\r\n        children.push(\r\n          new Paragraph({\r\n            children: [\r\n              new TextRun({\r\n                text: `${optionLabel}. `,\r\n                bold: true,\r\n              }),\r\n              new TextRun({\r\n                text: opt,\r\n              }),\r\n              ...(optIdx === q.correctOptionIndex\r\n                ? [\r\n                    new TextRun({\r\n                      text: ' (Correct Answer)',\r\n                      bold: true,\r\n                      color: '006400',\r\n                    }),\r\n                  ]\r\n                : []),\r\n            ],\r\n            indent: { left: 400 },\r\n            spacing: { after: 100 },\r\n          })\r\n        );\r\n      });\r\n\r\n      // Explanation\r\n      children.push(\r\n        new Paragraph({\r\n          children: [\r\n            new TextRun({\r\n              text: 'Explanation: ',\r\n              bold: true,\r\n            }),\r\n            new TextRun({\r\n              text: q.explanation,\r\n            }),\r\n          ],\r\n          indent: { left: 400 },\r\n          spacing: { after: 300 },\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  // Theory Question\r\n  if (lesson.theoryQuestion) {\r\n    children.push(\r\n      new Paragraph({\r\n        text: 'Theory Question',\r\n        heading: HeadingLevel.HEADING_1,\r\n        spacing: { before: 400, after: 200 },\r\n      })\r\n    );\r\n\r\n    children.push(\r\n      new Paragraph({\r\n        children: [\r\n          new TextRun({\r\n            text: 'Question: ',\r\n            bold: true,\r\n          }),\r\n          new TextRun({\r\n            text: lesson.theoryQuestion.question,\r\n          }),\r\n        ],\r\n        spacing: { after: 200 },\r\n      })\r\n    );\r\n\r\n    const answerText = markdownToText(lesson.theoryQuestion.answer);\r\n    children.push(\r\n      new Paragraph({\r\n        children: [\r\n          new TextRun({\r\n            text: 'Model Answer: ',\r\n            bold: true,\r\n          }),\r\n          new TextRun({\r\n            text: answerText,\r\n          }),\r\n        ],\r\n        spacing: { after: 300 },\r\n      })\r\n    );\r\n  }\r\n\r\n  // Create document\r\n  const doc = new Document({\r\n    sections: [\r\n      {\r\n        properties: {},\r\n        children,\r\n      },\r\n    ],\r\n  });\r\n\r\n  // Generate and download\r\n  const blob = await Packer.toBlob(doc);\r\n  const url = URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  link.download = `${lesson.topicTitle.replace(/[^a-z0-9]/gi, '_')}.docx`;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\n/**\r\n * Export lesson as PDF document\r\n */\r\nexport async function exportToPDF(\r\n  lesson: LessonContent,\r\n  metadata?: {\r\n    classLevel?: string;\r\n    subject?: string;\r\n    term?: string;\r\n    week?: number;\r\n    topic?: string;\r\n  }\r\n): Promise<void> {\r\n  // Create a temporary container element\r\n  const container = document.createElement('div');\r\n  container.style.width = '210mm'; // A4 width\r\n  container.style.padding = '20mm';\r\n  container.style.fontFamily = 'Arial, sans-serif';\r\n  container.style.fontSize = '12pt';\r\n  container.style.lineHeight = '1.6';\r\n  container.style.color = '#000';\r\n  container.style.backgroundColor = '#fff';\r\n  container.style.position = 'absolute';\r\n  container.style.left = '-9999px';\r\n  container.style.top = '0';\r\n\r\n  // Build HTML content\r\n  let html = `\r\n    <div style=\"text-align: center; margin-bottom: 30px;\">\r\n      <h1 style=\"font-size: 24pt; margin-bottom: 10px; color: #00695C;\">${lesson.topicTitle}</h1>\r\n      ${metadata ? `\r\n        <p style=\"color: #666; font-size: 10pt;\">\r\n          ${[\r\n            metadata.classLevel && `Class: ${metadata.classLevel}`,\r\n            metadata.subject && `Subject: ${metadata.subject}`,\r\n            metadata.term && `Term: ${metadata.term}`,\r\n            metadata.week && `Week: ${metadata.week}`,\r\n            metadata.topic && `Topic: ${metadata.topic}`,\r\n          ]\r\n            .filter(Boolean)\r\n            .join(' | ')}\r\n        </p>\r\n      ` : ''}\r\n    </div>\r\n\r\n    <div style=\"margin-bottom: 30px;\">\r\n      <h2 style=\"font-size: 18pt; color: #00695C; margin-bottom: 10px; border-bottom: 2px solid #00695C; padding-bottom: 5px;\">Introduction</h2>\r\n      <p style=\"text-align: justify;\">${lesson.introduction}</p>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom: 30px;\">\r\n      <h2 style=\"font-size: 18pt; color: #00695C; margin-bottom: 10px; border-bottom: 2px solid #00695C; padding-bottom: 5px;\">Lesson Content</h2>\r\n      <div style=\"text-align: justify; white-space: pre-wrap;\">${markdownToText(lesson.mainContent)}</div>\r\n    </div>\r\n  `;\r\n\r\n  // Summary Points\r\n  if (lesson.summaryPoints.length > 0) {\r\n    html += `\r\n      <div style=\"margin-bottom: 30px;\">\r\n        <h2 style=\"font-size: 18pt; color: #00695C; margin-bottom: 10px; border-bottom: 2px solid #00695C; padding-bottom: 5px;\">Key Summary Points</h2>\r\n        <ul style=\"padding-left: 20px;\">\r\n          ${lesson.summaryPoints.map(point => `<li style=\"margin-bottom: 10px;\">${point}</li>`).join('')}\r\n        </ul>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Practice Questions\r\n  if (lesson.practiceQuestions.length > 0) {\r\n    html += `\r\n      <div style=\"margin-bottom: 30px;\">\r\n        <h2 style=\"font-size: 18pt; color: #00695C; margin-bottom: 10px; border-bottom: 2px solid #00695C; padding-bottom: 5px;\">Practice Questions</h2>\r\n        ${lesson.practiceQuestions\r\n          .map(\r\n            (q, qIdx) => `\r\n          <div style=\"margin-bottom: 25px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;\">\r\n            <p style=\"font-weight: bold; margin-bottom: 10px;\">Question ${qIdx + 1}: ${q.question}</p>\r\n            <ul style=\"list-style: none; padding-left: 0;\">\r\n              ${q.options\r\n                .map(\r\n                  (opt, optIdx) => `\r\n              <li style=\"margin-bottom: 8px; padding-left: 20px;\">\r\n                <strong>${String.fromCharCode(65 + optIdx)}.</strong> ${opt}\r\n                ${optIdx === q.correctOptionIndex ? ' <span style=\"color: #006400; font-weight: bold;\">(Correct Answer)</span>' : ''}\r\n              </li>\r\n            `\r\n                )\r\n                .join('')}\r\n            </ul>\r\n            <p style=\"margin-top: 10px; padding: 10px; background-color: #f5f5f5; border-radius: 3px;\">\r\n              <strong>Explanation:</strong> ${q.explanation}\r\n            </p>\r\n          </div>\r\n        `\r\n          )\r\n          .join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Theory Question\r\n  if (lesson.theoryQuestion) {\r\n    html += `\r\n      <div style=\"margin-bottom: 30px;\">\r\n        <h2 style=\"font-size: 18pt; color: #00695C; margin-bottom: 10px; border-bottom: 2px solid #00695C; padding-bottom: 5px;\">Theory Question</h2>\r\n        <div style=\"padding: 15px; border: 1px solid #ddd; border-radius: 5px;\">\r\n          <p style=\"font-weight: bold; margin-bottom: 10px;\">Question: ${lesson.theoryQuestion.question}</p>\r\n          <div style=\"margin-top: 15px; padding: 10px; background-color: #f0f8f0; border-radius: 3px;\">\r\n            <strong>Model Answer:</strong>\r\n            <div style=\"margin-top: 5px; white-space: pre-wrap;\">${markdownToText(lesson.theoryQuestion.answer)}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  container.innerHTML = html;\r\n  document.body.appendChild(container);\r\n\r\n  try {\r\n    // Convert to canvas\r\n    const canvas = await html2canvas(container, {\r\n      useCORS: true,\r\n      logging: false,\r\n      background: '#ffffff',\r\n    });\r\n\r\n    // Calculate PDF dimensions (A4: 210mm x 297mm)\r\n    const imgWidth = 210; // A4 width in mm\r\n    const pageHeight = 297; // A4 height in mm\r\n    const imgHeight = (canvas.height * imgWidth) / canvas.width;\r\n    let heightLeft = imgHeight;\r\n\r\n    // Create PDF\r\n    const pdf = new jsPDF('p', 'mm', 'a4');\r\n    let position = 0;\r\n\r\n    // Add first page\r\n    pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, position, imgWidth, imgHeight);\r\n    heightLeft -= pageHeight;\r\n\r\n    // Add additional pages if content is longer than one page\r\n    while (heightLeft > 0) {\r\n      position = heightLeft - imgHeight;\r\n      pdf.addPage();\r\n      pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, position, imgWidth, imgHeight);\r\n      heightLeft -= pageHeight;\r\n    }\r\n\r\n    // Download PDF\r\n    pdf.save(`${lesson.topicTitle.replace(/[^a-z0-9]/gi, '_')}.pdf`);\r\n  } finally {\r\n    // Clean up\r\n    document.body.removeChild(container);\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 925, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Documents/fDigit%20Technologies/NaijaPrepAI/components/LessonView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { LessonContent } from '../types';\nimport { BookText, ListChecks, BrainCircuit, CheckCircle2, XCircle, ChevronDown, ChevronUp, FileText, FileDown, Loader2, Clock } from 'lucide-react';\nimport { exportToWord, exportToPDF } from '@/utils/exportUtils';\n\ninterface LessonViewProps {\n  content: LessonContent;\n  metadata?: {\n    classLevel?: string;\n    subject?: string;\n    term?: string;\n    week?: number;\n    topic?: string;\n  };\n}\n\ninterface LessonViewProps {\n  content: LessonContent;\n  metadata?: {\n    classLevel?: string;\n    subject?: string;\n    term?: string;\n    week?: number;\n    topic?: string;\n  };\n  lessonId?: string; // Add lessonId for saving quiz attempts\n}\n\nconst LessonView: React.FC<LessonViewProps> = ({ content, metadata, lessonId }) => {\n  const [activeTab, setActiveTab] = useState<'notes' | 'summary' | 'practice'>('notes');\n  const [selectedAnswers, setSelectedAnswers] = useState<number[]>(new Array(content.practiceQuestions.length).fill(-1));\n  const [showTheoryAnswer, setShowTheoryAnswer] = useState(false);\n  const [exporting, setExporting] = useState<'word' | 'pdf' | null>(null);\n  const [quizStarted, setQuizStarted] = useState(false);\n  const [quizTime, setQuizTime] = useState(0); // Time in seconds\n  const [quizSubmitted, setQuizSubmitted] = useState(false);\n  const [quizResult, setQuizResult] = useState<{\n    score: number;\n    correctAnswers: number;\n    totalQuestions: number;\n  } | null>(null);\n  const [savingAttempt, setSavingAttempt] = useState(false);\n\n  const handleExportWord = async () => {\n    try {\n      setExporting('word');\n      await exportToWord(content, metadata);\n    } catch (error) {\n      console.error('Error exporting to Word:', error);\n      alert('Failed to export to Word. Please try again.');\n    } finally {\n      setExporting(null);\n    }\n  };\n\n  const handleExportPDF = async () => {\n    try {\n      setExporting('pdf');\n      await exportToPDF(content, metadata);\n    } catch (error) {\n      console.error('Error exporting to PDF:', error);\n      alert('Failed to export to PDF. Please try again.');\n    } finally {\n      setExporting(null);\n    }\n  };\n\n  // Track quiz time\n  useEffect(() => {\n    let interval: NodeJS.Timeout | null = null;\n    if (activeTab === 'practice' && !quizSubmitted) {\n      if (!quizStarted) {\n        setQuizStarted(true);\n      }\n      interval = setInterval(() => {\n        setQuizTime((prev) => prev + 1);\n      }, 1000);\n    }\n    return () => {\n      if (interval) clearInterval(interval);\n    };\n  }, [activeTab, quizSubmitted, quizStarted]);\n\n  const handleOptionSelect = (qIndex: number, optionIndex: number) => {\n    if (quizSubmitted) return; // Don't allow changes after submission\n    const newSelected = [...selectedAnswers];\n    newSelected[qIndex] = optionIndex;\n    setSelectedAnswers(newSelected);\n  };\n\n  const handleSubmitQuiz = async () => {\n    if (!lessonId) {\n      alert('Lesson ID is required to save quiz results.');\n      return;\n    }\n\n    const answeredCount = selectedAnswers.filter((a) => a !== -1).length;\n    if (answeredCount < content.practiceQuestions.length) {\n      const confirm = window.confirm(\n        `You have only answered ${answeredCount} out of ${content.practiceQuestions.length} questions. Do you want to submit anyway?`\n      );\n      if (!confirm) return;\n    }\n\n    // Calculate score (only count answered questions)\n    let correctCount = 0;\n    const answers = content.practiceQuestions\n      .map((q, qIdx) => {\n        const selected = selectedAnswers[qIdx];\n        // Skip unanswered questions (-1)\n        if (selected === -1) return null;\n        const isCorrect = selected === q.correctOptionIndex;\n        if (isCorrect) correctCount++;\n        return {\n          questionIndex: qIdx,\n          selectedOption: selected,\n          isCorrect,\n        };\n      })\n      .filter((a) => a !== null) as Array<{\n        questionIndex: number;\n        selectedOption: number;\n        isCorrect: boolean;\n      }>;\n\n    // Calculate score based on answered questions only\n    const answeredQuestionsCount = answers.length;\n    const score = answeredQuestionsCount > 0 ? (correctCount / answeredQuestionsCount) * 100 : 0;\n    const result = {\n      score: Math.round(score * 100) / 100,\n      correctAnswers: correctCount,\n      totalQuestions: content.practiceQuestions.length, // Use total questions for consistency\n    };\n\n    setQuizResult(result);\n    setQuizSubmitted(true);\n\n    // Save quiz attempt\n    try {\n      setSavingAttempt(true);\n      const response = await fetch('/api/quiz/attempt', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          lessonId,\n          answers,\n          timeSpent: quizTime,\n          totalQuestions: content.practiceQuestions.length, // Send total questions count\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.details || errorData.error || 'Failed to save quiz attempt');\n      }\n\n      const data = await response.json();\n      console.log('Quiz attempt saved:', data);\n    } catch (error: any) {\n      console.error('Error saving quiz attempt:', error);\n      const errorMessage = error?.message || 'Failed to save quiz attempt';\n      console.error('Full error:', error);\n      alert(`Quiz completed! Your score: ${result.score}%\\n\\nHowever, there was an issue saving your results: ${errorMessage}\\n\\nPlease check the console for more details.`);\n    } finally {\n      setSavingAttempt(false);\n    }\n  };\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden animate-fade-in\">\n      <div className=\"p-6 border-b border-slate-100 bg-slate-50/50\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1\">\n            <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">{content.topicTitle}</h2>\n            <p className=\"text-slate-600\">{content.introduction}</p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleExportWord}\n              disabled={exporting !== null}\n              className=\"inline-flex items-center gap-2 px-4 py-2 bg-[#00695C] text-white rounded-lg hover:bg-[#005a4a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n              title=\"Export as Word Document\"\n            >\n              {exporting === 'word' ? (\n                <>\n                  <Loader2 className=\"animate-spin\" size={16} />\n                  Exporting...\n                </>\n              ) : (\n                <>\n                  <FileText size={16} />\n                  Export Word\n                </>\n              )}\n            </button>\n            <button\n              onClick={handleExportPDF}\n              disabled={exporting !== null}\n              className=\"inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n              title=\"Export as PDF Document\"\n            >\n              {exporting === 'pdf' ? (\n                <>\n                  <Loader2 className=\"animate-spin\" size={16} />\n                  Exporting...\n                </>\n              ) : (\n                <>\n                  <FileDown size={16} />\n                  Export PDF\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex border-b border-slate-200\">\n        <button\n          onClick={() => setActiveTab('notes')}\n          className={`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${\n            activeTab === 'notes'\n              ? 'border-b-2 border-green-600 text-green-700 bg-green-50/30'\n              : 'text-slate-500 hover:text-slate-700 hover:bg-slate-50'\n          }`}\n        >\n          <BookText size={18} />\n          Lesson Notes\n        </button>\n        <button\n          onClick={() => setActiveTab('summary')}\n          className={`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${\n            activeTab === 'summary'\n              ? 'border-b-2 border-green-600 text-green-700 bg-green-50/30'\n              : 'text-slate-500 hover:text-slate-700 hover:bg-slate-50'\n          }`}\n        >\n          <ListChecks size={18} />\n          Key Points\n        </button>\n        <button\n          onClick={() => setActiveTab('practice')}\n          className={`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors ${\n            activeTab === 'practice'\n              ? 'border-b-2 border-green-600 text-green-700 bg-green-50/30'\n              : 'text-slate-500 hover:text-slate-700 hover:bg-slate-50'\n          }`}\n        >\n          <BrainCircuit size={18} />\n          Practice Quiz\n        </button>\n      </div>\n\n      <div className=\"p-6 md:p-8 min-h-[500px]\">\n        {activeTab === 'notes' && (\n          <div className=\"prose prose-slate prose-lg max-w-none prose-headings:text-slate-800 prose-p:text-slate-600 prose-a:text-green-600\">\n            <ReactMarkdown>{content.mainContent}</ReactMarkdown>\n          </div>\n        )}\n\n        {activeTab === 'summary' && (\n          <div className=\"max-w-3xl mx-auto\">\n            <h3 className=\"text-lg font-semibold text-slate-900 mb-6\">Quick Revision Summary</h3>\n            <ul className=\"space-y-4\">\n              {content.summaryPoints.map((point, idx) => (\n                <li key={idx} className=\"flex gap-4 p-4 rounded-lg bg-yellow-50 border border-yellow-100 text-slate-700\">\n                  <span className=\"flex-shrink-0 w-6 h-6 rounded-full bg-yellow-200 text-yellow-700 flex items-center justify-center font-bold text-sm\">\n                    {idx + 1}\n                  </span>\n                  <span>{point}</span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {activeTab === 'practice' && (\n          <div className=\"max-w-3xl mx-auto space-y-12\">\n            {/* Quiz Header with Timer and Submit */}\n            <div className=\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-xl p-6\">\n              <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                <div>\n                  <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">Practice Quiz</h3>\n                  <div className=\"flex items-center gap-4 text-sm text-slate-600\">\n                    <span>\n                      {selectedAnswers.filter((a) => a !== -1).length} / {content.practiceQuestions.length} Answered\n                    </span>\n                    {quizStarted && (\n                      <span className=\"flex items-center gap-1\">\n                        <Clock size={16} />\n                        Time: {formatTime(quizTime)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                {!quizSubmitted && (\n                  <button\n                    onClick={handleSubmitQuiz}\n                    disabled={savingAttempt}\n                    className=\"px-6 py-2 bg-[#00695C] text-white rounded-lg hover:bg-[#005a4a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n                  >\n                    {savingAttempt ? 'Saving...' : 'Submit Quiz'}\n                  </button>\n                )}\n                {quizSubmitted && quizResult && (\n                  <div className=\"text-right\">\n                    <div className=\"text-2xl font-bold text-[#00695C]\">\n                      {quizResult.score}%\n                    </div>\n                    <div className=\"text-sm text-slate-600\">\n                      {quizResult.correctAnswers} / {quizResult.totalQuestions} Correct\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* MCQs */}\n            <div className=\"space-y-8\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-slate-900\">Multiple Choice Questions</h3>\n              </div>\n              \n              {content.practiceQuestions.map((q, qIdx) => {\n                const isAnswered = selectedAnswers[qIdx] !== -1;\n                const isCorrect = isAnswered && selectedAnswers[qIdx] === q.correctOptionIndex;\n                \n                return (\n                  <div key={qIdx} className=\"bg-slate-50 rounded-xl p-6 border border-slate-200\">\n                    <p className=\"font-medium text-slate-900 mb-4\">{qIdx + 1}. {q.question}</p>\n                    <div className=\"space-y-3\">\n                      {q.options.map((opt, optIdx) => {\n                        let btnClass = \"w-full text-left p-3 rounded-lg border text-sm transition-all \";\n                        \n                        if (isAnswered) {\n                           if (optIdx === q.correctOptionIndex) {\n                             btnClass += \"bg-green-100 border-green-500 text-green-900\";\n                           } else if (selectedAnswers[qIdx] === optIdx) {\n                             btnClass += \"bg-red-50 border-red-300 text-red-900\";\n                           } else {\n                             btnClass += \"bg-white border-slate-200 text-slate-400\";\n                           }\n                        } else {\n                           btnClass += \"bg-white border-slate-200 hover:border-green-400 hover:bg-green-50 text-slate-700\";\n                        }\n\n                        return (\n                          <button\n                            key={optIdx}\n                            disabled={isAnswered || quizSubmitted}\n                            onClick={() => handleOptionSelect(qIdx, optIdx)}\n                            className={btnClass}\n                          >\n                            <div className=\"flex items-center justify-between\">\n                              <span><span className=\"font-semibold mr-2\">{String.fromCharCode(65 + optIdx)}.</span> {opt}</span>\n                              {isAnswered && optIdx === q.correctOptionIndex && <CheckCircle2 size={16} className=\"text-green-600\" />}\n                              {isAnswered && selectedAnswers[qIdx] === optIdx && optIdx !== q.correctOptionIndex && <XCircle size={16} className=\"text-red-500\" />}\n                            </div>\n                          </button>\n                        );\n                      })}\n                    </div>\n                    {isAnswered && (\n                      <div className={`mt-4 p-3 rounded-lg text-sm ${isCorrect ? 'bg-green-50 text-green-800' : 'bg-slate-100 text-slate-700'}`}>\n                        <span className=\"font-bold\">Explanation:</span> {q.explanation}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Theory */}\n            <div className=\"border-t border-slate-200 pt-8\">\n              <h3 className=\"text-lg font-semibold text-slate-900 mb-4\">Theory Question</h3>\n              <div className=\"bg-white border border-slate-200 rounded-xl overflow-hidden\">\n                <div className=\"p-6 bg-slate-50 border-b border-slate-200\">\n                  <p className=\"font-medium text-slate-900\">{content.theoryQuestion.question}</p>\n                </div>\n                <div className=\"p-4\">\n                  <button \n                    onClick={() => setShowTheoryAnswer(!showTheoryAnswer)}\n                    className=\"flex items-center gap-2 text-green-600 font-medium text-sm hover:text-green-700\"\n                  >\n                    {showTheoryAnswer ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n                    {showTheoryAnswer ? 'Hide Model Answer' : 'Show Model Answer'}\n                  </button>\n                  {showTheoryAnswer && (\n                    <div className=\"mt-4 prose prose-sm prose-slate bg-green-50/50 p-4 rounded-lg border border-green-100\">\n                      <ReactMarkdown>{content.theoryQuestion.answer}</ReactMarkdown>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LessonView;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1716, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Documents/fDigit%20Technologies/NaijaPrepAI/app/lessons/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useSession } from 'next-auth/react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport DashboardLayout from '@/components/dashboard/DashboardLayout';\r\nimport LessonView from '@/components/LessonView';\r\nimport { LessonContent } from '@/types';\r\nimport { Loader2, ArrowLeft } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\nexport default function LessonPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const { data: session } = useSession();\r\n  const [lesson, setLesson] = useState<LessonContent | null>(null);\r\n  const [lessonMetadata, setLessonMetadata] = useState<{\r\n    classLevel?: string;\r\n    subject?: string;\r\n    term?: string;\r\n    week?: number;\r\n    topic?: string;\r\n  } | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchLesson() {\r\n      try {\r\n        const response = await fetch(`/api/lessons/${params.id}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          // Transform database lesson to LessonContent format\r\n          const lessonContent: LessonContent = {\r\n            topicTitle: data.topicTitle,\r\n            introduction: data.introduction,\r\n            mainContent: data.mainContent,\r\n            summaryPoints: data.summaryPoints,\r\n            practiceQuestions: data.practiceQuestions,\r\n            theoryQuestion: data.theoryQuestion,\r\n          };\r\n          setLesson(lessonContent);\r\n          \r\n          // Store metadata for export\r\n          setLessonMetadata({\r\n            classLevel: data.classLevel,\r\n            subject: data.subject,\r\n            term: data.term,\r\n            week: data.week,\r\n            topic: data.topic,\r\n          });\r\n        } else {\r\n          setError('Lesson not found');\r\n        }\r\n      } catch (err) {\r\n        setError('Failed to load lesson');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    if (params.id) {\r\n      fetchLesson();\r\n    }\r\n  }, [params.id]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"flex items-center justify-center min-h-[400px]\">\r\n            <Loader2 className=\"animate-spin text-[#00695C]\" size={48} />\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  if (error || !lesson) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n          <div className=\"bg-red-50 border border-red-200 rounded-xl p-8 text-center\">\r\n            <p className=\"text-red-700 mb-4\">{error || 'Lesson not found'}</p>\r\n            <Link\r\n              href=\"/dashboard/lessons\"\r\n              className=\"inline-flex items-center gap-2 text-[#00695C] font-semibold hover:underline\"\r\n            >\r\n              <ArrowLeft size={18} />\r\n              Back to My Lessons\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <Link\r\n          href=\"/dashboard/lessons\"\r\n          className=\"inline-flex items-center gap-2 text-slate-600 hover:text-[#00695C] mb-6 font-medium transition-colors\"\r\n        >\r\n          <ArrowLeft size={18} />\r\n          Back to My Lessons\r\n        </Link>\r\n        <LessonView \r\n          content={lesson} \r\n          metadata={lessonMetadata || undefined}\r\n          lessonId={params.id as string}\r\n        />\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;;;AATA;;;;;;;;AAWe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,sJAAU;IACpC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAuB;IAC3D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAM1C;IACV,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,IAAA,0KAAS;gCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,WAAW,MAAM,MAAM,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE;oBACxD,IAAI,SAAS,EAAE,EAAE;wBACf,MAAM,OAAO,MAAM,SAAS,IAAI;wBAChC,oDAAoD;wBACpD,MAAM,gBAA+B;4BACnC,YAAY,KAAK,UAAU;4BAC3B,cAAc,KAAK,YAAY;4BAC/B,aAAa,KAAK,WAAW;4BAC7B,eAAe,KAAK,aAAa;4BACjC,mBAAmB,KAAK,iBAAiB;4BACzC,gBAAgB,KAAK,cAAc;wBACrC;wBACA,UAAU;wBAEV,4BAA4B;wBAC5B,kBAAkB;4BAChB,YAAY,KAAK,UAAU;4BAC3B,SAAS,KAAK,OAAO;4BACrB,MAAM,KAAK,IAAI;4BACf,MAAM,KAAK,IAAI;4BACf,OAAO,KAAK,KAAK;wBACnB;oBACF,OAAO;wBACL,SAAS;oBACX;gBACF,EAAE,OAAO,KAAK;oBACZ,SAAS;gBACX,SAAU;oBACR,WAAW;gBACb;YACF;YAEA,IAAI,OAAO,EAAE,EAAE;gBACb;YACF;QACF;+BAAG;QAAC,OAAO,EAAE;KAAC;IAEd,IAAI,SAAS;QACX,qBACE,6LAAC,yJAAe;sBACd,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+NAAO;wBAAC,WAAU;wBAA8B,MAAM;;;;;;;;;;;;;;;;;;;;;IAKjE;IAEA,IAAI,SAAS,CAAC,QAAQ;QACpB,qBACE,6LAAC,yJAAe;sBACd,cAAA,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAqB,SAAS;;;;;;sCAC3C,6LAAC,0KAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,6LAAC,gOAAS;oCAAC,MAAM;;;;;;gCAAM;;;;;;;;;;;;;;;;;;;;;;;IAOnC;IAEA,qBACE,6LAAC,yJAAe;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,0KAAI;oBACH,MAAK;oBACL,WAAU;;sCAEV,6LAAC,gOAAS;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAGzB,6LAAC,uIAAU;oBACT,SAAS;oBACT,UAAU,kBAAkB;oBAC5B,UAAU,OAAO,EAAE;;;;;;;;;;;;;;;;;AAK7B;GAxGwB;;QACP,kJAAS;QACT,kJAAS;QACE,sJAAU;;;KAHd"}}]
}