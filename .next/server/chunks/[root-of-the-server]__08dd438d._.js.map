{"version":3,"sources":["../../../lib/prisma.ts"],"sourcesContent":["// lib/prisma.ts\n\nimport { PrismaClient } from '@prisma/client';\n\n// Extend the Global interface for TypeScript to recognize the global prisma property\ndeclare global {\n  // eslint-disable-next-line no-var\n  var cachedPrisma: PrismaClient;\n}\n\n// Lazy initialization function - only creates PrismaClient when called\n// This prevents module-level evaluation issues with Next.js 16 + Turbopack\nfunction getPrismaClient(): PrismaClient {\n  if (process.env.NODE_ENV === 'production') {\n    // In production, always create a new client\n    return new PrismaClient();\n  } else {\n    // In development, use the global object to keep a single instance\n    if (!global.cachedPrisma) {\n      // Create PrismaClient only when function is called (not at module load)\n      global.cachedPrisma = new PrismaClient();\n    }\n    return global.cachedPrisma;\n  }\n}\n\n// Export as a Proxy to make it truly lazy - only creates client when property is accessed\nexport const prisma = new Proxy({} as PrismaClient, {\n  get(_target, prop) {\n    const client = getPrismaClient();\n    const value = client[prop as keyof PrismaClient];\n    // If it's a function, bind it to the client instance\n    if (typeof value === 'function') {\n      return value.bind(client);\n    }\n    return value;\n  },\n});\n\nexport default prisma;\n"],"names":[],"mappings":"sHAEA,IAAA,EAAA,EAAA,CAAA,CAAA,OAyBO,IAAM,EAAS,IAAI,MAAM,CAAC,EAAmB,CAClD,IAAI,CAAO,CAAE,CAAI,EACf,IAAM,EAdC,IAAI,EAAA,CAcI,WAdQ,CAejB,EAAQ,CAAM,CAAC,EAA2B,OAEhD,AAAqB,YAAjB,AAA6B,OAAtB,EACF,EAAM,IAAI,CAAC,GAEb,CACT,CACF,oBAEe"}