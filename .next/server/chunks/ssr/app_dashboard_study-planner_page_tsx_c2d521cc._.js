module.exports=[88061,a=>{"use strict";var b=a.i(87924),c=a.i(18402),d=a.i(50944),e=a.i(72131),f=a.i(55857),g=a.i(41675),h=a.i(8406),i=a.i(53722),j=a.i(41710),k=a.i(92e3),l=a.i(15618),m=a.i(96221),n=a.i(33508),o=a.i(14548),p=a.i(65212);function q({onSubmit:a,onCancel:c,initialData:d}){let[f,h]=(0,e.useState)(d?.examName||""),[i,j]=(0,e.useState)(d?.examDate||""),[k,m]=(0,e.useState)(d?.endDate||""),[q,r]=(0,e.useState)(d?.subjectExams||[]),s=(a,b,c)=>{let d=[...q];d[a]={...d[a],[b]:c},r(d)};return(0,b.jsxs)("form",{onSubmit:b=>{(b.preventDefault(),f&&i)?a({examName:f,examDate:i,endDate:k||void 0,subjectExams:q.filter(a=>a.subject&&a.date)}):alert("Please fill in exam name and date")},className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(g.Calendar,{className:"text-[#00695C]",size:20}),d?"Edit Exam Timetable":"Create Exam Timetable"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Exam Name *"}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>h(a.target.value),placeholder:"e.g., WAEC 2024, BECE 2024",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Exam Start Date *"}),(0,b.jsx)("input",{type:"date",value:i,onChange:a=>j(a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Exam End Date (Optional)"}),(0,b.jsx)("input",{type:"date",value:k,onChange:a=>m(a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700",children:"Subject Exam Dates"}),(0,b.jsxs)("button",{type:"button",onClick:()=>{r([...q,{subject:"",date:"",time:""}])},className:"flex items-center gap-1 text-sm text-[#00695C] hover:text-[#004D40] font-medium",children:[(0,b.jsx)(l.Plus,{size:16}),"Add Subject"]})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 items-start p-3 bg-slate-50 rounded-lg",children:[(0,b.jsxs)("select",{value:a.subject,onChange:a=>s(c,"subject",a.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",children:[(0,b.jsx)("option",{value:"",children:"Select subject"}),p.AVAILABLE_SUBJECTS.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]}),(0,b.jsx)("input",{type:"date",value:a.date,onChange:a=>s(c,"date",a.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",placeholder:"Date"}),(0,b.jsx)("input",{type:"time",value:a.time||"",onChange:a=>s(c,"time",a.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",placeholder:"Time"}),(0,b.jsx)("button",{type:"button",onClick:()=>{r(q.filter((a,b)=>b!==c))},className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(n.X,{size:18})})]},c))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsxs)("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 bg-[#00695C] text-white px-4 py-2 rounded-lg hover:bg-[#004D40] transition-colors font-medium",children:[(0,b.jsx)(o.Save,{size:18}),"Save Timetable"]}),c&&(0,b.jsx)("button",{type:"button",onClick:c,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})]})}function r({timetable:a}){return(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Calendar,{className:"text-[#00695C]",size:20}),(0,b.jsxs)("h3",{className:"text-lg font-semibold text-slate-900",children:["Week ",a.week]})]}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[new Date(a.startDate).toLocaleDateString()," - ",new Date(a.endDate).toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"space-y-4",children:a.sessions.map((a,c)=>(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(g.Calendar,{className:"text-[#00695C]",size:16}),(0,b.jsx)("span",{className:"font-medium text-slate-900",children:new Date(a.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.subjects.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[(0,b.jsx)(i.BookOpen,{className:"text-[#00695C] mt-0.5",size:16}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("span",{className:"font-medium text-slate-900",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded border ${(a=>{switch(a){case"high":return"bg-red-100 text-red-800 border-red-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-green-100 text-green-800 border-green-300";default:return"bg-slate-100 text-slate-800 border-slate-300"}})(a.priority)}`,children:a.priority}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-slate-600",children:[(0,b.jsx)(j.Clock,{size:14}),(0,b.jsxs)("span",{children:[a.duration," min"]})]})]})]}),a.topics.length>0&&(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("p",{className:"text-xs text-slate-600 mb-1",children:"Topics to cover:"}),(0,b.jsx)("ul",{className:"list-disc list-inside text-xs text-slate-700 space-y-0.5",children:a.topics.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]})]},c))})]},c))})]})}function s(){let{data:a,status:n}=(0,c.useSession)(),[o,p]=(0,e.useState)([]),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)([]),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(null);(0,e.useEffect)(()=>{"authenticated"===n&&E()},[n]);let E=async()=>{try{let a=await fetch("/api/study-planner/exam-timetable?activeOnly=false");if(a.ok){let b=await a.json();p(b);let c=b.find(a=>a.isActive);if(c){t(c);let a=new Date(c.examDate),b=new Date,d=Math.ceil((a.getTime()-b.getTime())/864e5);D(d>0?d:null)}}}catch(a){console.error("Error fetching exam timetables:",a)}},F=async a=>{try{(await fetch("/api/study-planner/exam-timetable",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,isActive:!0})})).ok?(await E(),v(!1)):alert("Failed to save exam timetable")}catch(a){console.error("Error saving exam timetable:",a),alert("Failed to save exam timetable")}},G=async()=>{if(!s&&!C)return void alert("Please set an exam timetable or specify days until exam");z(!0);try{let a=await fetch("/api/study-planner/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({examTimetableId:s?.id,daysUntilExam:C,save:!1})});if(a.ok){let b=await a.json();x(b.timetables)}else{let b=await a.json();alert(b.error||"Failed to generate study plan")}}catch(a){console.error("Error generating study plan:",a),alert("Failed to generate study plan")}finally{z(!1)}},H=async()=>{if(!A.trim())return void alert("Please enter a plan name");try{let a=await fetch("/api/study-planner/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planName:A,timetables:w,examTimetableId:s?.id})});if(a.ok)alert("Study plan saved successfully!"),B(""),x([]);else{let b=await a.json();alert(b.error||"Failed to save study plan")}}catch(a){console.error("Error saving study plan:",a),alert("Failed to save study plan")}};return"loading"===n?(0,b.jsx)("div",{className:"min-h-screen bg-[#F7F8FA] flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#00695C]"})}):("unauthenticated"===n&&(0,d.redirect)("/auth/signin"),(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,b.jsx)(g.Calendar,{className:"text-[#00695C]",size:32}),"Study Planner & Timetable"]}),(0,b.jsx)("p",{className:"text-slate-600 mt-2",children:"AI-powered study plans based on your weak subjects and exam schedule"})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Exam Timetable"}),!u&&(0,b.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-[#00695C] text-white px-4 py-2 rounded-lg hover:bg-[#004D40] transition-colors",children:[(0,b.jsx)(l.Plus,{size:18}),s?"Update Timetable":"Create Timetable"]})]}),u?(0,b.jsx)(q,{onSubmit:F,onCancel:()=>v(!1),initialData:s||void 0}):(0,b.jsx)("div",{children:s?(0,b.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900",children:s.examName}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded",children:"Active"})]}),(0,b.jsxs)("p",{className:"text-sm text-slate-600 mb-2",children:["Exam Date: ",new Date(s.examDate).toLocaleDateString()]}),null!==C&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(j.Clock,{className:"text-[#00695C]",size:16}),(0,b.jsxs)("span",{className:"font-medium text-slate-900",children:[C," days until exam"]})]})]}):(0,b.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,b.jsx)(k.AlertCircle,{className:"mx-auto mb-2 text-slate-400",size:32}),(0,b.jsx)("p",{children:"No exam timetable set. Create one to generate personalized study plans."})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.Sparkles,{className:"text-[#00695C]",size:24}),"Generate Study Plan"]}),!s&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-yellow-800",children:"No exam timetable set. You can still generate a plan by specifying days until exam."}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("input",{type:"number",value:C||"",onChange:a=>D(a.target.value?parseInt(a.target.value):null),placeholder:"Days until exam",className:"px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]",min:"1"})})]}),(0,b.jsx)("button",{onClick:G,disabled:y||!s&&!C,className:"flex items-center gap-2 bg-[#00695C] text-white px-6 py-3 rounded-lg hover:bg-[#004D40] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"animate-spin",size:20}),"Generating Plan..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Sparkles,{size:20}),"Generate AI Study Plan"]})}),w.length>0&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,b.jsx)("input",{type:"text",value:A,onChange:a=>B(a.target.value),placeholder:"Enter plan name (e.g., 'Weekly Plan - Week 1')",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#00695C]"}),(0,b.jsxs)("button",{onClick:H,className:"flex items-center gap-2 bg-[#00695C] text-white px-4 py-2 rounded-lg hover:bg-[#004D40] transition-colors font-medium",children:[(0,b.jsx)(i.BookOpen,{size:18}),"Save Plan"]})]}),(0,b.jsx)("div",{className:"space-y-4",children:w.map((a,c)=>(0,b.jsx)(r,{timetable:a},c))})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[(0,b.jsx)(k.AlertCircle,{size:18}),"How It Works"]}),(0,b.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,b.jsx)("li",{children:"Analyzes your quiz performance to identify weak subjects"}),(0,b.jsx)("li",{children:"Prioritizes subjects with earlier exam dates"}),(0,b.jsx)("li",{children:"Allocates more study time to subjects you struggle with"}),(0,b.jsx)("li",{children:"Creates a balanced weekly schedule with appropriate breaks"}),(0,b.jsx)("li",{children:"Generates specific topics to focus on each day"})]})]})]})})}))}a.s(["default",()=>s],88061)}];

//# sourceMappingURL=app_dashboard_study-planner_page_tsx_c2d521cc._.js.map