module.exports=[9430,a=>{"use strict";var b=a.i(87924),c=a.i(18402),d=a.i(50944),e=a.i(72131),f=a.i(55857),g=a.i(4720),h=a.i(96221),i=a.i(16201),j=a.i(62722),k=a.i(92e3),l=a.i(210),m=a.i(41710),n=a.i(38246);function o(){let{data:a,status:o}=(0,c.useSession)();(0,d.useRouter)();let p=(0,d.useParams)().id,[q,r]=(0,e.useState)(null),[s,t]=(0,e.useState)(!0),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(null),[y,z]=(0,e.useState)(null),[A,B]=(0,e.useState)({}),[C,D]=(0,e.useState)(0),[E,F]=(0,e.useState)("single"),[G,H]=(0,e.useState)(0);(0,e.useEffect)(()=>{"unauthenticated"===o&&(0,d.redirect)("/auth/signin")},[o]),(0,e.useEffect)(()=>{async function b(){if(a?.user?.id&&p)try{let a=await fetch(`/api/exam-prep/${p}`);if(a.ok){let b=await a.json();r(b.examPrep)}else x("Failed to load exam prep")}catch(a){console.error("Error fetching exam prep:",a),x("Failed to load exam prep")}finally{t(!1)}}a?.user?.id&&p&&b()},[a,p]),(0,e.useEffect)(()=>{if(!y&&q){let a=setInterval(()=>{H(a=>a+1)},1e3);return()=>clearInterval(a)}},[y,q]);let I=a=>{let b=Math.floor(a/60);return`${b}:${(a%60).toString().padStart(2,"0")}`},J=(a,b)=>{B(c=>({...c,[a]:b}))},K=async()=>{if(!q)return;let a=Object.keys(A).length;if(!(a<q.totalQuestions)||confirm(`You have only answered ${a} out of ${q.totalQuestions} questions. Do you want to submit anyway?`)){v(!0);try{let a=Object.entries(A).map(([a,b])=>({questionIndex:parseInt(a),selectedOption:b})),b=await fetch(`/api/exam-prep/${p}/attempt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:a,timeSpent:G})});if(b.ok){let a=await b.json();z(a.results)}else{let a=await b.json();x(a.error||"Failed to submit exam")}}catch(a){x(a.message||"Failed to submit exam")}finally{v(!1)}}};if("loading"===o||s)return(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(h.Loader2,{className:"animate-spin text-[#00695C]",size:48})})})});if(w&&!q)return(0,b.jsx)(f.default,{children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,b.jsx)(k.AlertCircle,{className:"mx-auto text-red-600 mb-4",size:48}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error"}),(0,b.jsx)("p",{className:"text-red-700 mb-4",children:w}),(0,b.jsx)(n.default,{href:"/dashboard/exam-prep",className:"inline-block bg-[#00695C] hover:bg-[#00695C]/90 text-white font-semibold px-6 py-3 rounded-lg transition-colors",children:"Back to Exam Prep"})]})})});if(!q)return null;let L=q.questions[C],M=Object.keys(A).length,N=M/q.totalQuestions*100;return y?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)(n.default,{href:"/dashboard/exam-prep",className:"inline-flex items-center gap-2 text-slate-600 hover:text-[#00695C] mb-4",children:[(0,b.jsx)(l.ArrowLeft,{size:18}),"Back to Exam Prep"]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-8 border border-slate-200 shadow-sm mb-6",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:`mx-auto w-24 h-24 rounded-full flex items-center justify-center mb-4 ${y.score>=70?"bg-green-100 text-green-600":y.score>=50?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:(0,b.jsxs)("span",{className:"text-3xl font-bold",children:[Math.round(y.score),"%"]})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Exam Results"}),(0,b.jsxs)("p",{className:"text-slate-600",children:["You scored ",y.correctAnswers," out of ",y.totalQuestions," questions"]}),(0,b.jsxs)("p",{className:"text-sm text-slate-500 mt-2",children:["Time spent: ",I(G)]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y.correctAnswers}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"Correct"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:y.totalQuestions-y.correctAnswers}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"Incorrect"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:y.totalQuestions}),(0,b.jsx)("div",{className:"text-sm text-slate-600",children:"Total"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Question Review"}),y.results.map((a,c)=>{let d=q.questions[c];return(0,b.jsxs)("div",{className:`bg-white rounded-xl p-6 border-2 ${a.isCorrect?"border-green-200":"border-red-200"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-semibold text-slate-700",children:["Question ",c+1]}),a.isCorrect?(0,b.jsx)(i.CheckCircle,{className:"text-green-600",size:20}):(0,b.jsx)(j.XCircle,{className:"text-red-600",size:20})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"easy"===d.difficulty?"bg-green-100 text-green-700":"medium"===d.difficulty?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:d.difficulty})]}),(0,b.jsx)("p",{className:"text-slate-900 font-medium mb-4",children:a.question}),(0,b.jsx)("div",{className:"space-y-2 mb-4",children:d.options.map((c,d)=>{let e=a.selectedOption===d,f=a.correctOption===d,g="bg-slate-50";return f?g="bg-green-50 border-green-300":e&&!f&&(g="bg-red-50 border-red-300"),(0,b.jsx)("div",{className:`p-3 rounded-lg border-2 ${g} ${f?"border-green-300":e?"border-red-300":"border-slate-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"font-semibold text-slate-700",children:[String.fromCharCode(65+d),"."]}),(0,b.jsx)("span",{className:f?"font-semibold text-green-800":"text-slate-700",children:c}),f&&(0,b.jsx)(i.CheckCircle,{className:"text-green-600 ml-auto",size:18}),e&&!f&&(0,b.jsx)(j.XCircle,{className:"text-red-600 ml-auto",size:18})]})},d)})}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Explanation:"}),(0,b.jsx)("p",{className:"text-sm text-blue-800",children:a.explanation})]})]},c)})]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,b.jsx)(n.default,{href:"/dashboard/exam-prep",className:"flex-1 bg-[#00695C] hover:bg-[#00695C]/90 text-white font-semibold px-6 py-3 rounded-lg transition-colors text-center",children:"Back to Exam Prep"}),(0,b.jsx)("button",{onClick:()=>{z(null),B({}),D(0),H(0)},className:"flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold px-6 py-3 rounded-lg transition-colors",children:"Retake Exam"})]})]})}):(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)(n.default,{href:"/dashboard/exam-prep",className:"inline-flex items-center gap-2 text-slate-600 hover:text-[#00695C] mb-4",children:[(0,b.jsx)(l.ArrowLeft,{size:18}),"Back to Exam Prep"]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:q.examName||`${q.subject} Exam Prep`}),(0,b.jsxs)("p",{className:"text-slate-600",children:[q.subject," â€¢ ",q.classLevel]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 mb-1",children:[(0,b.jsx)(m.Clock,{size:18}),(0,b.jsx)("span",{className:"font-mono",children:I(G)})]}),(0,b.jsxs)("div",{className:"text-sm text-slate-500",children:[M," / ",q.totalQuestions," answered"]})]})]}),(0,b.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-2",children:(0,b.jsx)("div",{className:"bg-[#00695C] h-2 rounded-full transition-all duration-300",style:{width:`${N}%`}})}),(0,b.jsxs)("div",{className:"text-sm text-slate-600",children:[Math.round(N),"% Complete"]})]})]}),(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-1 border border-slate-200 inline-flex",children:[(0,b.jsx)("button",{onClick:()=>F("single"),className:`px-4 py-2 rounded text-sm font-medium transition-colors ${"single"===E?"bg-[#00695C] text-white":"text-slate-600 hover:bg-slate-50"}`,children:"Single View"}),(0,b.jsx)("button",{onClick:()=>F("all"),className:`px-4 py-2 rounded text-sm font-medium transition-colors ${"all"===E?"bg-[#00695C] text-white":"text-slate-600 hover:bg-slate-50"}`,children:"All Questions"})]})}),"single"===E?(0,b.jsxs)("div",{className:"bg-white rounded-xl p-8 border border-slate-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("span",{className:"text-sm font-semibold text-slate-600",children:["Question ",C+1," of ",q.totalQuestions]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"easy"===L.difficulty?"bg-green-100 text-green-700":"medium"===L.difficulty?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:L.difficulty})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-slate-900 mb-6",children:L.question})]}),(0,b.jsx)("div",{className:"space-y-3 mb-6",children:L.options.map((a,c)=>{let d=A[C]===c;return(0,b.jsx)("button",{onClick:()=>J(C,c),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${d?"border-[#00695C] bg-[#00695C]/5":"border-slate-200 hover:border-[#00695C]/50 bg-white"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:`font-semibold ${d?"text-[#00695C]":"text-slate-600"}`,children:[String.fromCharCode(65+c),"."]}),(0,b.jsx)("span",{className:d?"text-[#00695C] font-medium":"text-slate-700",children:a})]})},c)})}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[(0,b.jsx)("button",{onClick:()=>D(Math.max(0,C-1)),disabled:0===C,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,b.jsx)("div",{className:"flex gap-2",children:q.questions.map((a,c)=>(0,b.jsx)("button",{onClick:()=>D(c),className:`w-8 h-8 rounded text-sm ${c===C?"bg-[#00695C] text-white":void 0!==A[c]?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:c+1},c))}),(0,b.jsx)("button",{onClick:()=>D(Math.min(q.totalQuestions-1,C+1)),disabled:C===q.totalQuestions-1,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}):(0,b.jsx)("div",{className:"space-y-4",children:q.questions.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("span",{className:"font-semibold text-slate-700",children:["Question ",c+1]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${"easy"===a.difficulty?"bg-green-100 text-green-700":"medium"===a.difficulty?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:a.difficulty})]}),(0,b.jsx)("p",{className:"text-slate-900 font-medium mb-4",children:a.question}),(0,b.jsx)("div",{className:"space-y-2",children:a.options.map((a,d)=>{let e=A[c]===d;return(0,b.jsx)("button",{onClick:()=>J(c,d),className:`w-full text-left p-3 rounded-lg border-2 transition-all ${e?"border-[#00695C] bg-[#00695C]/5":"border-slate-200 hover:border-[#00695C]/50 bg-white"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:`font-semibold ${e?"text-[#00695C]":"text-slate-600"}`,children:[String.fromCharCode(65+d),"."]}),(0,b.jsx)("span",{className:e?"text-[#00695C] font-medium":"text-slate-700",children:a})]})},d)})})]},c))}),(0,b.jsxs)("div",{className:"mt-6 bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[(0,b.jsx)("button",{onClick:K,disabled:u,className:"w-full bg-[#00695C] hover:bg-[#00695C]/90 text-white font-semibold px-6 py-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"animate-spin",size:20}),"Submitting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.FileText,{size:20}),"Submit Exam"]})}),(0,b.jsx)("p",{className:"text-sm text-slate-500 text-center mt-3",children:"You can review and change your answers before submitting"})]})]})})}a.s(["default",()=>o])}];

//# sourceMappingURL=app_dashboard_exam-prep_%5Bid%5D_page_tsx_29e9e80b._.js.map